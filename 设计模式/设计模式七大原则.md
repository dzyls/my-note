### 设计模式的七大原则

---

设计模式的七大原则有 ：

- 开闭原则 ：对修改关闭，对扩展开放
- 单一职责原则 ：一个类或一个方法只负责一个职责
- 接口隔离原则 ：将不同功能定义在不同接口中
- 里氏替换原则 ：父类出现的地方都可以用子类替换
- 迪米特法则 ：最少知道原则，尽可能少了解依赖其他模块
- 聚合原则 ：使用聚合原则而非继承，避免继承类数量爆炸
- 依赖倒置原则 ：依赖接口或抽象类而不是具体的实现类



### 解析

---



##### 开闭原则

对修改关闭，对扩展开放。

这个原则很好理解，一个类或模块可能被很多类或模块所依赖，如果贸然修改，指不定哪个依赖的类或者模块就出问题了。

因此采用继承、重写的方式来扩展，这样能尽量避免依赖的模块不出问题。



##### 单一职责原则

一个类或者方法，只完成一个功能。

单一职责原则主要目的是降低代码的复杂度，和修改的风险。

举个反例，一个方法既做A功能，又做B功能，在修改这个方法的A功能时，就有可能影响到B功能。



设计模式中，责任链模式是对单一职责原则最佳的注释。责任链上的每个类，都只完成一个功能。

比如，Sentinel底层的责任链，StaticistNode就只处理统计，LogNode就只处理日志，DegradeNode处理降级，这样设计职责明确，划分的比较清晰。



##### 依赖倒置原则

应该依赖接口或抽象类而不是具体的实现类。

依赖具体的实现类会导致扩展性差的问题。

比如，方法的入参是ArrayList，那么就只能接受ArrayList类型的。

如果入参是List，那么调用方填ArrayList或者LinkedList都可以。

如果入参是Collection，则List和Set的入参则都可以。

因此如果非必要，最好是依赖接口和抽象类。



##### 接口隔离原则

将不同功能定义在不同接口中。

这句话的意思是，同一个接口中，最好只有一类的功能。

比如说，Animal接口，有走路、吃饭、说话的方法。

鸟类是动物，可以继承Animal接口，但鸟类会飞，飞翔这个功能，不要加在Animal接口中，而是要另外定义一个接口有Fly这个方法，然后鸟类实现这个接口。 



##### 迪米特法则

最少知道原则。

如果两个类可以不直接关联，那么最好不要直接关联。

只和直接朋友交谈，不和陌生人说话。



优点是 ：

- 降低类与类的耦合，提升模块之间的独立性。



缺点是 ：

- 会产生大量的中介类。



##### 里氏替换原则

父类出现的地方，都可以用子类替换。

这句话的深层意思是，子类可以扩展父类的功能，但不能改变父类的原有功能。这样就可以做到子类可以替换父类。

- 子类可以实现父类的抽象方法，子类可以有自己特有的方法
- 子类重载父类的方法时，方法的前置条件【输入参数】要比父类的更宽松，后置条件要更严格【方法的返回值】



##### 聚合原则

使用聚合而非继承。

这个原则的意思是，如果要使用一个类的功能，可以采用聚合这个类的对象来拥有这个功能。

比如，汽车有轮胎，轮胎有滚动的功能，汽车应该聚合轮胎类，而非继承轮胎类。

聚合原则可以避免子类太多，导致代码很复杂。

