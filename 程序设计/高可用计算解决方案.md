## 什么是高可用计算

高可用计算针对的是当部分硬件故障时，计算任务依然可用。



## 如何实现高可用计算

计算高可用的实现思路就是通过增加机器数量来做到高可用，单台机器无论如何都实现不了高可用。



### 高可用计算架构

---



**主备：**

主备架构是最简单的高可用的了，执行逻辑如下 ：

1. 主机执行所有任务，备机什么也不做
2. 主机宕机时，任务分配者不会将任务分配给备机
3. 主机可恢复，则任务分配器就继续将任务发送给主机
4. 主机不可恢复，则人工操作把备机转正。



主备架构根据备机是否启动分为：

- 冷备 ：备机没有启动
- 温备 ：备机已经启动，但不执行任务



**主从：**

主从与主备的区别就是，从服务器也是要执行任务的，这样的优点在于，充分利用了从服务器的性能。

但是也有相应的难点，比如是否要做任务的拆分，主从分别只执行某项任务，如Zookeeper的主服务器执行写任务，从服务器在收到写任务时会转发到主服务器。



主从架构，还是需要人工的去做切换。



**对称集群架构**

无论是主从还是主备，都需要手工去做切换，或者是需要通过一系列复杂的机制去做切换。

人工切换比较复杂，易错；通过机制实现也很复杂。

为了解决这个难题，提出了，对称集群架构和非对称集群架构。



对称集群架构 ：即集群中所有的服务器的角色都相同，都执行同样的任务。

非对称集群架构：集群中服务器的角色不同，不同角色执行不同的任务。【RocketMQ双主双从】



对称集群架构需要有一个任务分配器，通过某种策略将任务分发给不同的服务器【轮询、随机、状态检测】。

轮询和随机都比较简单，状态检测则需要检测机器的状态，如是否宕机、负载状态等。



**非对称集群**

非对称集群架构的任务分配则不一样了，有些任务只能主服务器执行，有些则是从服务器执行。