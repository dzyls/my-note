### DHCP

---

DHCP ： 【动态主机配置协议】

作用 ：动态的分配IP地址，用于大型局域网。

DHCP可以 :

- 自动分配IP地址 ：MAC与IP永久绑定
- 动态分配IP地址 ：IP地址有时间限制，在1/2和7/8的时间节点客户端会续约IP地址
- 手工分配方式 ：手工指定IP地址



DHCP使用的是UDP协议，端口为67和68端口 ：

- 68是发送DHCP Request报文的源端口
- 67是接收DHCP报文的目标端口

初始没有IP地址，因此源IP是0.0.0.0，目的地址是255.255.255.255



各种DHCP报文 ：

- DHCP Discover ：客户端查找DHCP报文
- DHCP Offer ：DHCP 服务端响应客户端查找报文
- DHCP Request ：客户端向服务端请求IP地址的报文
- DHCP ACK ：服务端向客户端分配IP的报文
- DHCP Release : 客户端释放IP地址的报文



续约 ：

DHCP动态分配方式中 , IP地址是会过期的，因此需要定时续期。

在租约的1/2的时间节点，客户端会发送DHCP Request报文尝试续约，续约成功则租期从0开始；

如果服务端在7/8的时间节点还没发送过来报文，那么客户端将会再次发送DHCP Request报文尝试续约。

如果还是没有收到，那么IP地址将会过期。客户端会再次发送DHCP Discover查找DHCP服务端。



**DHCP使用UDP协议，所以对对方的状态无感知**